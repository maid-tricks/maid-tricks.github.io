{"version":3,"sources":["webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///../matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts"],"names":["EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","async","createMessageContent","message","isHTML","_ref","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","content","msgtype","MsgType","Emote","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","_content","roomContext","mxClient","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","_content$msgtype$star","_content$msgtype","sendAnyway","shouldSendAnyway","dis","dispatch","action","Action","FocusAComposer","context","timelineRenderingType","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","event","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","_ref2","editorStateTransfer","getEvent","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","endEditing","response","getRoomId","oldContent","isContentModified","threadRootId","EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","React","createElement","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","useRoomContext","useMatrixClientContext","useMemo","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","p","deserializePart","_editorStateTransfer$","replace","getFormattedContent","parseEvent","shouldEscape","reduce","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","TimelineRenderingType","Room","FocusEditMessageComposer","focusComposer","ComposerInsert","composerType","ComposerType","Edit","setSelection","selection","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","props","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","onChange","setIsSaveDisabled","useState","setContent","_isSaveDisabled","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","Fragment"],"mappings":"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","file":"bundles/713b08846cdbdfa5cd1c/34.js","sourceRoot":""}